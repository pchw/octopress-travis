<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: RubyMotion | ぽっちぽちにしてやんよ]]></title>
  <link href="http://pchw.github.com/blog/categories/rubymotion/atom.xml" rel="self"/>
  <link href="http://pchw.github.com/"/>
  <updated>2012-06-02T12:24:48+09:00</updated>
  <id>http://pchw.github.com/</id>
  <author>
    <name><![CDATA[pchw]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[[RubyMotion] 証明書の名前に日本語が入っていた時にrake device出来ない問題の解決策]]></title>
    <link href="http://pchw.github.com/blog/2012/06/02/certificate/"/>
    <updated>2012-06-02T12:10:00+09:00</updated>
    <id>http://pchw.github.com/blog/2012/06/02/certificate</id>
    <content type="html"><![CDATA[<p>RubyMotionを色々いじって記事書いてたのですが，全然実機で試してませんでした．</p>

<p>BT周りの実装をしてて，ついにシミュレータで確認ができなくなったので，実機に転送しようとして<code>rake device</code>したら</p>

<pre><code>"iPhone Developper: &lt;your escaped name&gt; : no identity found
rake aborted!
Command failed with status (1): [CODESIGN_ALLOCATE="/Developer/Platforms/iP...]
</code></pre>

<p>とか出やがりました．</p>

<p>マルチバイト文字を何かエスケープして<code>\123\456</code>みたいな形式にしてくれて，codesignに渡してしまうので，codesign側がそんなidentifyがねえよと言ってるわけですね．</p>

<p><a href="http://www.rubymotion.com/developer-center/guides/project-management/#_configuration">RubyMotion Project Management Guide#2.Configuration</a>
によれば，</p>

<pre><code>codesign_certificate
The name of the certificate to use for codesigning, as a String. The default value is the first iPhone Developer certificate found in keychain. Example: "iPhone Developer: Darth Vader (A3LKZY369Q)".
</code></pre>

<p>とあるので，Rakefileに指定すればいいかなーとか思って</p>

<pre><code>$:.unshift("/Library/RubyMotion/lib")
require 'motion/project'

Motion::Project::App.setup do |app|
  # Use `rake config' to see complete project settings.
  app.name = 'hoge'
  app.codesign_certificate = "iPhone Developer: &lt;your name&gt;" # added
end
</code></pre>

<p>こんな感じで，<code>app.codesign_certificate</code>を追加したらですね，</p>

<pre><code>rake aborted!
Rakefile:9: invalid multibyte char (US-ASCII)
Rakefile:9: invalid multibyte char (US-ASCII)
Rakefile:9: syntax error, unexpected $end, expecting keyword_end
</code></pre>

<p>こういうエラーが出て，もしかしてRakefileにマルチバイト文字は指定出来ないのか，，，ピンチ！</p>

<pre><code>$ file Rakefile
Rakefile: UTF-8 Unicode text
</code></pre>

<p>ちゃんとUTF8だよな，，，</p>

<h2>解決策</h2>

<p>と，まぁ色々悩んだんですが，結局解決策は</p>

<pre><code># -*- coding: utf-8 -*-
$:.unshift("/Library/RubyMotion/lib")
require 'motion/project'

Motion::Project::App.setup do |app|
  # Use `rake config' to see complete project settings.
  app.name = 'hoge'
  app.codesign_certificate = "iPhone Developer: &lt;your name&gt;"
end
</code></pre>

<p>これが正解です．</p>

<p><code># -*- coding: utf-8 -*-</code> を追加すればいいだけでした．</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RubyMotion 1.9が出てた！早い！]]></title>
    <link href="http://pchw.github.com/blog/2012/06/01/19/"/>
    <updated>2012-06-01T12:29:00+09:00</updated>
    <id>http://pchw.github.com/blog/2012/06/01/19</id>
    <content type="html"><![CDATA[<p>一昨日ぐらいに1.8が出たと思ったら，もう1.9が出てきました．</p>

<p>しかも変更点が多い．</p>

<p>次は2.0なのか1.10なのか気になりますね！</p>

<pre><code>= RubyMotion 1.9 =

  * Fixed a bug in the build system where the paths of vendored libraries
    would not be properly quoted and cause a build failure in case they
    contain space characters.
  * Fixed a bug in the build system where using a lower deployment_target
    version would cause a link error at runtime because the application was
    linking against a framework that does not exist (ex. CoreImage on 4.3).
  * Fixed the `rake spec' task to not move the simulator window to the
    foreground.
  * Fixed a bug in the compiler where APIs accepting pointers to
    CoreFoundation types could not be given Pointer objects of the :object
    type (ex. CFErrorRef*).
  * Added support for CoreAudio (experimental). At the very least, constants
    pointing to four-bytes characters should be properly covered.
  * Fixed a typo in "expected array of %d elements, got %d" exception message
    where the numbers were inverted. Thanks Enrico Thierbach.
  * Fixed a bug in the compiler where compiling strings containing only null
    characters (ex. "\x00") would cause a crash.
</code></pre>

<ul>
<li>vendorライブラリのpathがQuoteで囲まれてなくてスペースが含まれてたときにビルドが失敗するのを修正</li>
<li>CoreImageを4.3で使おうとするみたいなdevelopment_targetを昔のに設定してるのに存在しないフレームワークを指定したときにリンクエラーになるビルドの問題を修正</li>
<li><code>rake spec</code>した時にシミュレータが前に出てこないのを修正</li>
<li>CFなんちゃらへのポインタをAPIに渡せない問題の修正</li>
<li>CoreAudioのサポートを追加．</li>
<li>例外メッセージのtypo修正</li>
<li>nullキャラクターだけが含まれたstringをコンパイルする時にクラッシュしてた問題を修正</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[RubyMotion]Bubble-Wrapを使ってみた]]></title>
    <link href="http://pchw.github.com/blog/2012/05/31/bubblewrap/"/>
    <updated>2012-05-31T22:44:00+09:00</updated>
    <id>http://pchw.github.com/blog/2012/05/31/bubblewrap</id>
    <content type="html"><![CDATA[<p>今日はBubble-Wrapというライブラリを使ってみました．</p>

<p><a href="http://matt.aimonetti.net/BubbleWrap/">Bubble-Wrap</a></p>

<p>Bubble-Wrap はめんどくさいことを簡単にしてくれるヘルパーとかRubyっぽく書けない部分をよりRubyっぽくしてくれるライブラリです．</p>

<p>例えば，<a href="http://pchw.github.com/blog/2012/05/30/resource/">昨日書いた</a>リソースの読み込みの所で，</p>

<pre><code>path = NSBundle.mainBundle.resourcePath.stringByAppendingPathComponent "test.txt"
</code></pre>

<p>とか書きましたけど，<code>NSBundle.mainBundle.resoucePath</code>とかめんどくさいですよね．</p>

<p>それを，</p>

<pre><code>path = resources_path.stringByAppendingPathComponent "text.txt"
</code></pre>

<p>にしてくれたりします．
（他にも色々と<code>documents_path</code>とか<code>notification_center</code>とか）</p>

<pre><code>alert "Hoge"
</code></pre>

<p>とするだけで，</p>

<pre><code>alert = UIAlertView.alloc.initWithTitle "Hoge",
    message: nil,
    delegate: nil,
    cancelButtonTitle: 'OK',
    otherButtonTitles: nil
alert.show
</code></pre>

<p>とやってくれたりするのもあります．</p>

<p>色々ありますが，Wikiを見ても一部しか載っていないので，何が出来るか全部把握するには，<a href="https://github.com/mattetti/BubbleWrap/tree/master/lib/bubble-wrap">Githubでコード</a>を見るしか無いっぽいです．</p>

<p>他にも便利なものがあって，HTTPアクセスやJSONのラッパーも提供されています．
例えば，Twitter APIにアクセスして，取得したJSONのデータのアクセスは</p>

<pre><code>BubbleWrap::HTTP.get("https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&amp;include_entities=true") do |response|
    json = BubbleWrap::JSON.parse response.body.to_str
    p json['name']
end
</code></pre>

<p>のように書けます．
元が NSURLConnectionを作って，delegateで受けてみたいなことを書かないのと比べるととても簡単です．</p>

<p><code>response</code> も<code>body</code>だけでなく，<code>headers</code>や<code>status_code</code>とか<code>ok?</code>（200 OKかどうかを調べる）などもあります．</p>

<p>他にも，device情報を取ったり，gestureを簡単に扱ったりするものもあるので，有効に活用して素早くRubyMotionでアプリ作って行きましょう！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RubyMotionでリソース読み込み]]></title>
    <link href="http://pchw.github.com/blog/2012/05/30/resource/"/>
    <updated>2012-05-30T23:37:00+09:00</updated>
    <id>http://pchw.github.com/blog/2012/05/30/resource</id>
    <content type="html"><![CDATA[<p>すごく初歩的なところだけども，RubyMotionで画像やテキストのリソースを<code>.app</code>の中にプリセット保持して使う方法です．</p>

<p>色々と試すときに画像やテキストを使いたい事が多くて，備忘録的に書いておきます．</p>

<p>まず，<code>.app</code>内にリソースを保持するには，<code>/resources</code>に入れておけばOKです．</p>

<p>あとは読み出しですが，画像の場合はすごく簡単で，</p>

<pre><code>UIImage.imageNamed "hoge.png"
</code></pre>

<p>とかすれば，<code>/resources/hoge.png</code> が読み出されます．</p>

<p>テキストとかHTMLファイルとかは，</p>

<pre><code>path = NSBundle.mainBundle.resourcePath.stringByAppendingPathComponent "test.txt"
str = NSString.stringWithContentsOfFile path
</code></pre>

<p>とかすれば<code>NSString</code>で取得できます．</p>

<p><code>NSBundle.mainBundle.resourcePath</code>で<code>/resources</code>に当たる場所のPathが取得できるので，あとは好きにすればOKということですね．</p>

<p>簡単なサンプルを書いといたので，置いときます．</p>

<p><a href="https://github.com/pchw/rm-resource-sample">画像とテキストを読みだしてUILabelとUIImageViewに貼り付けるサンプル</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RubyMotion 1.8 リリースされてますね]]></title>
    <link href="http://pchw.github.com/blog/2012/05/30/18/"/>
    <updated>2012-05-30T20:52:00+09:00</updated>
    <id>http://pchw.github.com/blog/2012/05/30/18</id>
    <content type="html"><![CDATA[<p>リリース周期はやい！もう1.8が出てます．</p>

<pre><code>$ sudo motion update 
</code></pre>

<p>しましょう！今回は修正が少なめです．</p>

<pre><code>= RubyMotion 1.8 =

  * Fixed a bug in the generation of BridgeSupport files for multiple headers
    directories.
  * When building vendored projects, unset environment variables that could
    potentially make the build to fail.
    https://github.com/HipByte/motion-cocoapods/issues/12
</code></pre>

<ul>
<li>複数のヘッダディレクトリを指定したときのBridgeSupportファイル生成のとこのバグ修正</li>
<li>ベンダープロジェクトをビルドするときに環境変数CCが設定されてない時にビルド失敗する問題の修正．</li>
</ul>


<p>いつも誰かがRubyMotionの新しいバージョン出たって言ってるの見てアップデートしてるのが分かるんだけど，言ってる人はどうやって新しいバージョンが出たって知るんだろう？毎日<code>motion update</code>とかしてるのかな．</p>
]]></content>
  </entry>
  
</feed>
